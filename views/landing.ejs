

<div class="container-fluid p-0">
  <!-- Hero Section -->
  <section class="hero d-flex align-items-center justify-content-center text-center text-white">
    <div class="overlay"></div>
    <div class="content">
      <h1 class="display-4 fw-bold">Welcome to My Blog</h1>
      <p class="lead">Share your thoughts with the world.</p>
      <% if (!user) { %>
        <a href="/auth/register" class="btn btn-outline-light btn-lg">Get Started</a>
        <a href="/auth/login" class="btn btn-light btn-lg ms-3">Login</a>
      <% } else { %>
        <a href="/blogs/new" class="btn btn-success btn-lg">Create a Blog</a>
      <% } %>
    </div>
  </section>
  
  </section>

  <!-- Latest Blogs -->
  <section class="latest-blogs py-5">
    <div class="container">
      <h2 class="text-center mb-4">Latest Blogs</h2>
      <div class="row">
        <% blogs.forEach(blog => { %>
          <div class="col-12 col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <img src="/uploads/<%= blog.image %>" alt="Blog Image" class="img-fluid">
              <div class="card-body">
                <h5 class="card-title"><%= blog.title %></h5>
                <p class="card-text"><p class="card-text">
                    <%= blog.content ? blog.content.substring(0, 100) : "No content yet" %>...
                  </p>
                  
              </div>
              <div class="card-footer d-flex justify-content-between">
                <small class="text-muted">By <%= blog.author.name %></small>
                <a href="/blogs/<%= blog._id %>" class="btn btn-outline-primary btn-sm">Read More</a>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </section>
  
</div>
<script>

document.addEventListener('DOMContentLoaded', () => {
  fetch('/api/blogs/latest')
    .then(response => response.json())
    .then(blogs => {
      const blogsContainer = document.querySelector('.latest-blogs .container .row');
      blogs.forEach(blog => {
        const blogCard = document.createElement('div');
        blogCard.classList.add('col-md-4', 'mb-4');
        blogCard.innerHTML = `
          <div class="card h-100 shadow-sm">
            <img src="${blog.imageUrl || '/images/default.jpg'}" class="card-img-top" alt="${blog.title}">
            <div class="card-body">
              <h5 class="card-title">${blog.title}</h5>
              <p class="card-text">${blog.content.substring(0, 100)}...</p>
            </div>
            <div class="card-footer">
              <small class="text-muted">By ${blog.author.username}</small>
              <a href="/blogs/${blog._id}" class="btn btn-outline-primary btn-sm float-end">Read More</a>
            </div>
          </div>
        `;
        blogsContainer.appendChild(blogCard);
      });
    })
    .catch(error => console.error('Error loading blogs:', error));
});


</script>